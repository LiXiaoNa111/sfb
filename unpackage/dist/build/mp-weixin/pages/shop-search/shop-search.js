(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop-search/shop-search"],{"47cd":function(t,e,s){"use strict";var a=s("9477"),i=s.n(a);i.a},6697:function(t,e,s){"use strict";s.r(e);var a=s("c000"),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},"670e":function(t,e,s){"use strict";var a=s("84a2"),i=s.n(a);i.a},"6ecd":function(t,e,s){"use strict";(function(t){s("77c6");a(s("66fd"));var e=a(s("e8c3"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},"71e2":function(t,e,s){"use strict";s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return a}));var a={tuiBadge:function(){return s.e("ui/tui-badge/tui-badge").then(s.bind(null,"6d05"))},loadRefresh:function(){return s.e("components/load-refresh/load-refresh").then(s.bind(null,"763e"))},tuiModal:function(){return s.e("ui/tui-modal/tui-modal").then(s.bind(null,"cbe5"))}},i=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"7da2":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(s("f96d"));function i(t){return t&&t.__esModule?t:{default:t}}var n={components:{myh5:a.default},onLoad:function(e){this.type=e.type,1==this.type?(this.search=e.name,this.symptomId=e.id,this.getSymptomData()):2==this.type&&(this.search=e.name,this.sortId=e.id,this.getSortData(e.id)),this.getSearchList();var s=t.getStorageSync(this.SEARCHSECORD);this.$u.test.isEmpty(s)?this.searchSecondList=null:this.searchSecondList=s},data:function(){return{type:"",listData:null,searchList:null,searchSecondList:[],modal2:!1,pageNum:1,totalPage:"",search:null,symptomId:"",sortId:"",isSearch:!1}},methods:{loadMore:function(){this.pageNum+=1,1==this.type?this.moreSymptom():2==this.type?this.moreSort():0==this.type&&this.moreSearch()},moreSymptom:function(){var t=this;this.$u.get(this.goodsListUrl,{symptomId:this.symptomId,pageNum:this.pageNum}).then((function(e){if(console.log(e),0==e.status){for(var s=0;s<e.data.length;s++)t.listData.push(e.data[s]);t.$refs.loadRefresh.loadOver()}}))},moreSort:function(){var t=this;this.$u.get(this.goodsListUrl,{sortId:this.sortId,pageNum:this.pageNum}).then((function(e){if(console.log(e),0==e.status){for(var s=0;s<e.data.length;s++)t.listData.push(e.data[s]);t.$refs.loadRefresh.loadOver()}}))},moreSearch:function(){var t=this;this.$u.get(this.goodsListUrl,{pageNum:this.pageNum,keyword:this.search}).then((function(e){if(console.log(e),0==e.status){for(var s=0;s<e.data.length;s++)t.listData.push(e.data[s]);t.$refs.loadRefresh.loadOver()}}))},refresh:function(){this.pageNum=1,1==this.type?this.getSymptomData():2==this.type?this.getSortData():0==this.type&&this.getSearchData()},show2:function(){this.modal2=!0},hide2:function(){this.modal2=!1},handleClick2:function(e){var s=e.index;0===s||(t.removeStorageSync(this.SEARCHSECORD),this.searchSecondList=null),this.hide2()},searchBlur:function(t){this.$u.test.isEmpty(t.detail.value)&&this.goCancel()},itemSearch:function(t){this.search=t,this.searchData()},getSearchList:function(){var t=this;this.$u.get(this.searchListUrl).then((function(e){console.log(e),0==e.status&&(t.searchList=e.data)}))},toDetail:function(e){t.navigateTo({url:"../shop-details/shop-details?id="+e})},goBack:function(){t.navigateBack()},goCancel:function(){this.search=null,this.listData=null,this.isSearch=!1,this.pageNum=1},searchData:function(){if(this.$u.test.isEmpty(this.search))this.$u.toast("请先输入要搜索的内容");else{var e={item:this.search};this.$u.test.isEmpty(this.searchSecondList)&&(this.searchSecondList=[],this.searchSecondList.push(e),t.setStorageSync(this.SEARCHSECORD,this.searchSecondList));for(var s=0,a=0;a<this.searchSecondList.length;a++)this.searchSecondList[a].item.includes(e.item)||s++;s==this.searchSecondList.length&&(this.searchSecondList.push(e),t.setStorageSync(this.SEARCHSECORD,this.searchSecondList)),this.getSearchData()}},getSearchData:function(){var t=this;this.isSearch=!0,this.$u.get(this.goodsListUrl,{keyword:this.search,pageNum:this.pageNum}).then((function(e){console.log(e),0==e.status&&(t.listData=e.data,console.log("关键字搜索"),console.log(t.listData),t.totalPage=Number(e.msg))})).catch((function(e){4==e.data.status&&(console.log("无数据关键字搜索"),t.listData=null)}))},getSymptomData:function(){var t=this;this.isSearch=!0,this.$u.get(this.goodsListUrl,{symptomId:this.symptomId,pageNum:this.pageNum}).then((function(e){0==e.status&&(t.listData=e.data,console.log("搜索病症"),console.log(t.listData),t.totalPage=Number(e.msg))})).catch((function(e){4==e.data.status&&(console.log("无数据搜索病症"),t.listData=null)}))},getSortData:function(){var t=this;this.isSearch=!0,this.$u.get(this.goodsListUrl,{sortId:this.sortId,pageNum:this.pageNum}).then((function(e){console.log(e),0==e.status&&(t.listData=e.data,console.log("其他分类搜索"),console.log(t.listData),t.totalPage=Number(e.msg))})).catch((function(e){4==e.data.status&&(console.log("无数据其他分类"),t.listData=null)}))}}};e.default=n}).call(this,s("543d")["default"])},"84a2":function(t,e,s){},"903d":function(t,e,s){"use strict";s.r(e);var a=s("7da2"),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},9477:function(t,e,s){},c000:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"myh5",props:["docId"],data:function(){return{src:"",modal:!1,loading:!1}},onLoad:function(){console.log("的粉红色"+this.docI),this.docId&&this.downloadApp()},methods:{handleClick:function(){this.modal=!1},isWeiXinBrowser:function(){var t=window.navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)},download:function(){window.location.href=this.h5APPPath},download2:function(){this.loading=!0,this.src=this.AppStorePath},downloadApp:function(){var t=this;this.$u.get(this.VersionPlatformUrl).then((function(e){0==e.status&&("Android"==e.msg?t.download():"iPhone"==e.msg&&t.download2())}))}}};e.default=a},d1b7:function(t,e,s){"use strict";var a;s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement;t._self._c},n=[]},e8c3:function(t,e,s){"use strict";s.r(e);var a=s("71e2"),i=s("903d");for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);s("47cd");var o,r=s("f0c5"),c=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=c.exports},f96d:function(t,e,s){"use strict";s.r(e);var a=s("d1b7"),i=s("6697");for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);s("670e");var o,r=s("f0c5"),c=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=c.exports}},[["6ecd","common/runtime","common/vendor"]]]);