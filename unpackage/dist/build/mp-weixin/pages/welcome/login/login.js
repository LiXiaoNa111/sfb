(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/welcome/login/login"],{1033:function(t,e,n){"use strict";n.r(e);var o=n("1c17"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},"1c17":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("f96d"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){Promise.all([n.e("common/vendor"),n.e("components/jyf-parser/jyf-parser")]).then(function(){return resolve(n("d0a6"))}.bind(null,n)).catch(n.oe)},a={components:{myh5:o.default,jyfParser:s},onLoad:function(e){this.type=e.type,this.isplatform=t.getSystemInfoSync().platform;var n=this;t.getSystemInfo({success:function(t){console.log("获取系统信息");var e=t.system.split(".");console.log(e[0]),e[0]>=13?n.iosIs13=!0:n.iosIs13=!1}}),this.checked=t.getStorageSync(this.READ);var o=t.getStorageSync(this.IPHONE);this.$u.test.isEmpty(o)||(this.phone=o)},onBackPress:function(){return 1==this.type?(t.$emit(this.INFORMBACKLOGIN,""),!0):2==this.type&&(t.$emit(this.INFORMBACKLOGINME,""),!0)},onShow:function(){var e=this;t.getNetworkType({success:function(t){console.log("网络状态监测111111"),console.log(t.networkType),"none"==t.networkType?(e.isConnected=!1,console.log("无网络"),e.showTop(1)):e.isConnected=!0}}),t.onNetworkStatusChange((function(t){console.log("网络状态监测222222"),e.isConnected=t.isConnected,console.log(e.isConnected),console.log(t.networkType),t.isConnected?e.showTop(0):e.showTop(1)}))},data:function(){return{type:"",isplatform:"",iosIs13:"",isConnected:"",registrationId:"",deviceNumber:"",title:"Hello",checked:!1,html:'<p>我已认真阅读、理解并同意<a href="http://47.103.104.99/sfb/#/pages/web-view/agreement-web-view?type=3" target="_blank">《尚方宝使用协议》</a>和<a href="http://47.103.104.99/sfb/#/pages/web-view/agreement-web-view?type=2" target="_blank">《尚方宝隐私政策》</a>。</p>',getCodeTip:"获取验证码",million:60,codeStatus:!0,phone:"",code:"",basicData:[{type:"green",msg:"网络恢复连接~"},{type:"danger",msg:"网络无连接~"}],wxData:{deviceNumber:"",registrationId:"",openId:"",nickName:"",gender:"",avatarUrl:"",unionId:""}}},methods:{loginIos:function(){if(this.checked){var e=this;t.login({provider:"apple",success:function(t){var n=t.authResult.openid;e.toLoginApple(n)},fail:function(t){e.$u.toast("登录失败"),console.log("登录失败"),console.log(t)}})}else this.$u.toast("请勾选并阅读用户协议")},toLoginApple:function(e){var n=this;t.showLoading(),n.$u.get(n.appleLoginUrl,{appleId:e,registrationId:this.registrationId,deviceNumber:this.deviceNumber}).then((function(e){t.hideLoading(),console.log(e),0==e.status&&n.goMain(e.data)})).catch((function(e){t.hideLoading(),1==e.data.status&&n.$u.toast(e.data.msg)}))},toService:function(){t.navigateTo({url:"../../web-view/agreement-web-view?type=1"})},toPrivacy:function(){t.navigateTo({url:"../../web-view/agreement-web-view?type=2"})},showTop:function(t){console.log("打印index");var e={msg:this.basicData[t].msg,duration:this.basicData[t].duration||2e3,type:this.basicData[t].type};console.log(t),this.$refs.toast.showTips(e)},loginWx:function(){if(this.checked){var e=this;t.login({provider:"weixin",success:function(n){console.log("微信登录成功"),console.log(n.authResult),t.getUserInfo({provider:"weixin",success:function(t){console.log("11111111111111111111111获取用户信息"),console.log(t.userInfo),e.wxMessage(t.userInfo)},fail:function(){console.log("未授权")}})}})}else this.$u.toast("请勾选并阅读用户协议")},wxMessage:function(e){var n=this;this.wxData.deviceNumber=this.deviceNumber,this.wxData.registrationId=this.registrationId,this.wxData.openId=e.openId,this.wxData.nickName=e.nickName,this.wxData.gender=e.gender,this.wxData.avatarUrl=e.avatarUrl,this.wxData.unionId=e.unionId,this.$u.get(this.WXLoginUrl,{unionId:e.unionId}).then((function(t){0==t.status&&n.goMain(t.data)})).catch((function(e){100==e.data.status?(console.log("去绑定"),t.navigateTo({url:"../../binding-phone/binding-phone?type=2&data="+encodeURIComponent(JSON.stringify(n.wxData))})):1==e.data.status&&n.$u.toast(e.data.msg)}))},goMain:function(e){1==e.state&&t.setStorageSync(this.ISID,!0),t.setStorageSync(this.READ,!0),t.setStorageSync(this.ISLOGIN,!0),t.setStorageSync(this.TOKEN,e.token),t.setStorageSync(this.ID,e.id),t.$emit(this.LOGINSOCKET,""),t.setStorageSync(this.CLINICNAME,e.clinicName),t.setStorageSync(this.HEADIMG,e.avatar),t.setStorageSync(this.NAME,e.userName),t.setStorageSync(this.IPHONE,e.phone),t.$emit(this.INFORMLOGIN,"更新登录状态"),t.switchTab({url:"../../diagnosis/diagnosis"})},onClick:function(){this.checked=!this.checked},getCode:function(){var t=this;if(this.isConnected)if(this.$u.test.mobile(this.phone)){if(console.log(this.codeStatus+"============="+this.phone),this.codeStatus){this.codeStatus=!1;var e=this;e.changeTip();var n=setInterval((function(){e.changeTip(n)}),1e3);this.$u.get(this.getCodeUrl,{phone:this.phone}).then((function(e){t.$u.toast(e.msg)}))}}else this.$u.toast("手机号格式错误");else this.$u.toast("网络无连接~")},changeTip:function(t){this.million--,this.getCodeTip=this.million+"s后重新获取",0==this.million&&(clearInterval(t),this.million=60,this.getCodeTip="获取验证码",this.codeStatus=!0)},onLogin:function(){var t=this;console.log("手机设备号"),console.log(this.deviceNumber),console.log("极光设备号"),console.log(this.registrationId);var e=this;if(this.$u.test.mobile(this.phone))if(4==this.code.length){if(!this.checked)return void this.$u.toast("请勾选并阅读用户协议");this.$u.get(this.loginUrl,{deviceNumber:this.deviceNumber,registrationId:this.registrationId,phone:this.phone,code:this.code,type:0}).then((function(t){e.goMain(t.data)})).catch((function(e){1==e.data.status&&t.$u.toast(e.data.msg)}))}else this.$u.toast("请输入正确4位短信验证码");else this.$u.toast("请输入正确的手机号")}}};e.default=a}).call(this,n("543d")["default"])},"2c48":function(t,e,n){},6697:function(t,e,n){"use strict";n.r(e);var o=n("c000"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},"670e":function(t,e,n){"use strict";var o=n("84a2"),i=n.n(o);i.a},6849:function(t,e,n){"use strict";var o=n("2c48"),i=n.n(o);i.a},"813b":function(t,e,n){"use strict";n.r(e);var o=n("ea9f"),i=n("1033");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("6849");var a,c=n("f0c5"),r=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=r.exports},"84a2":function(t,e,n){},c000:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"myh5",props:["docId"],data:function(){return{src:"",modal:!1,loading:!1}},onLoad:function(){console.log("的粉红色"+this.docI),this.docId&&this.downloadApp()},methods:{handleClick:function(){this.modal=!1},isWeiXinBrowser:function(){var t=window.navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)},download:function(){window.location.href=this.h5APPPath},download2:function(){this.loading=!0,this.src=this.AppStorePath},downloadApp:function(){var t=this;this.$u.get(this.VersionPlatformUrl).then((function(e){0==e.status&&("Android"==e.msg?t.download():"iPhone"==e.msg&&t.download2())}))}}};e.default=o},cdb3:function(t,e,n){"use strict";(function(t){n("77c6");o(n("66fd"));var e=o(n("813b"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},d1b7:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement;t._self._c},s=[]},ea9f:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o}));var o={tuiTips:function(){return n.e("ui/tui-tips/tui-tips").then(n.bind(null,"ac3e"))}},i=function(){var t=this,e=t.$createElement;t._self._c},s=[]},f96d:function(t,e,n){"use strict";n.r(e);var o=n("d1b7"),i=n("6697");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("670e");var a,c=n("f0c5"),r=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=r.exports}},[["cdb3","common/runtime","common/vendor"]]]);