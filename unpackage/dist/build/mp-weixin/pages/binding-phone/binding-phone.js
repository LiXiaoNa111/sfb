(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/binding-phone/binding-phone"],{"0a66":function(t,n,e){"use strict";e.r(n);var i=e("81f6"),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);n["default"]=o.a},"20e5":function(t,n,e){"use strict";var i;e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return i}));var o=function(){var t=this,n=t.$createElement;t._self._c},s=[]},"299e":function(t,n,e){"use strict";e.r(n);var i=e("20e5"),o=e("0a66");for(var s in o)"default"!==s&&function(t){e.d(n,t,(function(){return o[t]}))}(s);e("99d3");var a,u=e("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);n["default"]=c.exports},"4c9e":function(t,n,e){},6697:function(t,n,e){"use strict";e.r(n);var i=e("c000"),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);n["default"]=o.a},"670e":function(t,n,e){"use strict";var i=e("84a2"),o=e.n(i);o.a},"81f6":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("f96d"));function o(t){return t&&t.__esModule?t:{default:t}}var s={components:{myh5:i.default},onLoad:function(t){this.type=t.type,2==this.type&&(this.wxData=JSON.parse(decodeURIComponent(t.data)),console.log("传递过来信息"),console.log(JSON.stringify(this.wxData)))},data:function(){return{type:"",wxData:"",getCodeTip:"获取验证码",phone:"",code:"",codeStatus:!0,million:60}},methods:{getCode:function(){var t=this;if(this.$u.test.isEmpty(this.phone))this.$u.toast("请先输入手机号");else if(this.$u.test.mobile(this.phone)){if(this.codeStatus){this.codeStatus=!1;var n=this;n.changeTip();var e=setInterval((function(){n.changeTip(e)}),1e3);this.$u.get(this.getCodeUrl,{phone:this.phone}).then((function(n){t.$u.toast(n.msg)}))}}else this.$u.toast("手机号格式错误")},changeTip:function(t){this.million--,this.getCodeTip=this.million+"s后重新获取",0==this.million&&(clearInterval(t),this.million=60,this.getCodeTip="获取验证码",this.codeStatus=!0)},onup:function(){if(this.$u.test.isEmpty(this.phone))this.$u.toast("请先输入手机号");else if(this.$u.test.mobile(this.phone))if(this.$u.test.isEmpty(this.code))this.$u.toast("请先输入验证码");else{1==this.type?this.upIphone():2==this.type&&this.bindPhone()}else this.$u.toast("手机号格式错误")},upIphone:function(){var n=this;this.$u.get(this.customerPhoneUrl,{newPhone:this.phone,code:this.code}).then((function(e){console.log(e),0==e.status&&(t.setStorageSync(n.IPHONE,n.phone),t.$emit(n.UPIPHONE,""),t.navigateBack())})).catch((function(t){1==t.data.status&&n.$u.toast(t.data.msg)}))},bindPhone:function(){var t=this;this.$u.get(this.customerBindPhoneUrl,{phone:this.phone,code:this.code,deviceNumber:this.wxData.deviceNumber,registrationId:this.wxData.registrationId,openId:this.wxData.openId,nickName:this.wxData.nickName,gender:this.wxData.gender,avatarUrl:this.wxData.avatarUrl,unionId:this.wxData.unionId}).then((function(n){0==n.status&&(t.$u.toast("登录成功"),t.gan(n.data))})).catch((function(n){1==n.data.status&&t.$u.toast(n.data.msg)}))},gan:function(n){console.log("登录成功数"),console.log(n),1==n.state&&t.setStorageSync(this.ISID,!0),t.setStorageSync(this.ISLOGIN,!0),t.setStorageSync(this.TOKEN,n.token),t.setStorageSync(this.ID,n.id),t.$emit(this.LOGINSOCKET,""),t.setStorageSync(this.CLINICNAME,n.clinicName),t.setStorageSync(this.HEADIMG,n.avatar),t.setStorageSync(this.NAME,n.userName),t.setStorageSync(this.IPHONE,n.phone),t.$emit(this.INFORMLOGIN,"更新登录状态"),t.switchTab({url:"../diagnosis/diagnosis"})}}};n.default=s}).call(this,e("543d")["default"])},"84a2":function(t,n,e){},"99d3":function(t,n,e){"use strict";var i=e("4c9e"),o=e.n(i);o.a},bcb9:function(t,n,e){"use strict";(function(t){e("77c6");i(e("66fd"));var n=i(e("299e"));function i(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},c000:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={name:"myh5",props:["docId"],data:function(){return{src:"",modal:!1,loading:!1}},onLoad:function(){console.log("的粉红色"+this.docI),this.docId&&this.downloadApp()},methods:{handleClick:function(){this.modal=!1},isWeiXinBrowser:function(){var t=window.navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)},download:function(){window.location.href=this.h5APPPath},download2:function(){this.loading=!0,this.src=this.AppStorePath},downloadApp:function(){var t=this;this.$u.get(this.VersionPlatformUrl).then((function(n){0==n.status&&("Android"==n.msg?t.download():"iPhone"==n.msg&&t.download2())}))}}};n.default=i},d1b7:function(t,n,e){"use strict";var i;e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return i}));var o=function(){var t=this,n=t.$createElement;t._self._c},s=[]},f96d:function(t,n,e){"use strict";e.r(n);var i=e("d1b7"),o=e("6697");for(var s in o)"default"!==s&&function(t){e.d(n,t,(function(){return o[t]}))}(s);e("670e");var a,u=e("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);n["default"]=c.exports}},[["bcb9","common/runtime","common/vendor"]]]);