(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/attention-doctor/attention-doctor"],{"0280":function(t,o,e){"use strict";var i=e("64bf"),n=e.n(i);n.a},"3ecc":function(t,o,e){"use strict";e.r(o);var i=e("759f"),n=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(o,t,(function(){return i[t]}))}(s);o["default"]=n.a},"64bf":function(t,o,e){},6697:function(t,o,e){"use strict";e.r(o);var i=e("c000"),n=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(o,t,(function(){return i[t]}))}(s);o["default"]=n.a},"670e":function(t,o,e){"use strict";var i=e("84a2"),n=e.n(i);n.a},"759f":function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=s(e("f96d")),n=e("d01c");function s(t){return t&&t.__esModule?t:{default:t}}var a={components:{myh5:i.default},onLoad:function(o){if(o.scene){console.log("has scene");var e=decodeURIComponent(o.scene);console.log("scene is ",e);var i=e.split("=");console.log("setStorageSync:",i[0],"=",i[1]),this.docId=i[1],this.getData()}else console.log("donot has scene"),this.docId=o.docId,console.log("1接收到医生id为："+this.docId),this.getData();this.$u.get(this.VersionPlatformUrl).then((function(t){0==t.status&&"iPhone"==t.msg&&(0,n.listenScrollTop)()}));var s=t.getStorageSync(this.IPHONE);this.$u.test.isEmpty(s)?this.platform=1:this.getbindUser(s)},data:function(){return{platform:0,type:"",docId:"",data:"",synopsis:"",modal8:!1,name:"",sfId:"",modal:!1,editPhone:"",editCode:"",getCodeTip:"获取验证码",million:60,codeStatus:!0,holderPhone:"请输入手机号",isRed:!1,holderCode:"请输入验证码",isCodeRed:!1,src:"",loading:""}},methods:{toDownLoad:function(){var t=this;this.$u.get(this.VersionPlatformUrl).then((function(o){0==o.status&&("Android"==o.msg?window.location.href=t.h5APPPath:"iPhone"==o.msg&&(t.loading=!0,t.src=t.AppStorePath,setTimeout((function(){t.$u.toast("若无反应,请前往App Store搜索“尚方宝”")}),3e3)))}))},getbindUser:function(t){this.$u.get(this.bindUserSourceUrl,{docId:this.docId,phone:t}).then((function(t){console.log(t),t.status})).catch((function(t){console.log(t.data.msg)}))},show8:function(){this.modal8=!0},hide8:function(){this.modal8=!1},show:function(){this.modal=!0},hide:function(){this.modal=!1},getCode:function(){var t=this;if(this.$u.test.isEmpty(this.editPhone))this.isRed=!0;else{if(!this.$u.test.mobile(this.editPhone))return this.editPhone="",this.holderPhone="请输入正确的手机号",void(this.isRed=!0);if(this.codeStatus){this.codeStatus=!1;var o=this;o.changeTip();var e=setInterval((function(){o.changeTip(e)}),1e3);this.$u.get(this.getCodeUrl,{phone:this.editPhone}).then((function(o){t.$u.toast(o.msg)})).catch((function(o){t.$u.toast(o.data.msg)}))}}},changeTip:function(t){this.million--,this.getCodeTip=this.million+"s后重新获取",0==this.million&&(clearInterval(t),this.million=60,this.getCodeTip="获取验证码",this.codeStatus=!0)},goBind:function(){var o=this;if(this.$u.test.isEmpty(this.editPhone))this.isRed=!0;else{if(!this.$u.test.isEmpty(this.editCode))return this.$u.test.mobile(this.editPhone)?4!=this.editCode.length?(this.editCode="",this.holderCode="请输入正确的验证码",void(this.isCodeRed=!0)):void this.$u.get(this.bindUserSourceUrl,{docId:this.docId,phone:this.editPhone,smsCode:this.editCode}).then((function(e){console.log(e),0==e.status&&(o.$u.toast("绑定账号成功!"),t.setStorageSync(o.IPHONE,o.editPhone),setTimeout((function(){o.toDownLoad()}),1e3))})).catch((function(t){console.log(t.data.msg),o.toDownLoad()})):(this.editPhone="",this.holderPhone="请输入正确的手机号",void(this.isRed=!0));this.isCodeRed=!0}},goOut:function(){var o=this;this.$u.test.isEmpty(this.name)?this.$u.toast("请输入姓名"):this.$u.test.isEmpty(this.sfId)?this.$u.toast("请输入身份证号"):this.$u.test.idCard(this.sfId)?this.$u.get(this.customerAuthUrl,{username:this.name,IDNumber:this.sfId}).then((function(e){t.hideLoading(),0==e.status&&(o.$u.toast("认证成功!"),o.hide8(),t.setStorageSync(o.NAME,o.name),t.setStorageSync(o.IDCARD,o.sfId),t.setStorageSync(o.ISID,!0),t.$emit(o.UPDATEID,""),o.toChat())})).catch((function(e){t.hideLoading(),o.$u.toast(e.data.msg)})):this.$u.toast("请输入正确的18位身份证号")},getData:function(){var t=this;console.log("2接收到医生id为："+this.docId),this.$u.get(this.docInfoUrl,{docId:this.docId}).then((function(o){console.log(o),0==o.status&&(t.data=o.data,t.$u.test.isEmpty(t.data.synopsis)?t.synopsis="医生暂无简介":t.synopsis=t.data.synopsis)}))},toChat:function(){var o=t.getStorageSync(this.ISID);o?t.navigateTo({url:"../chat/chat?name="+this.data.userName+"&account=doc_"+this.data.id+"&img="+encodeURIComponent(JSON.stringify(this.data.avatar))}):this.show8()}}};o.default=a}).call(this,e("543d")["default"])},"84a2":function(t,o,e){},ae17:function(t,o,e){"use strict";e.r(o);var i=e("bed6"),n=e("3ecc");for(var s in n)"default"!==s&&function(t){e.d(o,t,(function(){return n[t]}))}(s);e("0280");var a,d=e("f0c5"),c=Object(d["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);o["default"]=c.exports},bed6:function(t,o,e){"use strict";e.d(o,"b",(function(){return n})),e.d(o,"c",(function(){return s})),e.d(o,"a",(function(){return i}));var i={tuiModalMe:function(){return e.e("ui/tui-modal-me/tui-modal-me").then(e.bind(null,"e253"))}},n=function(){var t=this,o=t.$createElement;t._self._c},s=[]},c000:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i={name:"myh5",props:["docId"],data:function(){return{src:"",modal:!1,loading:!1}},onLoad:function(){console.log("的粉红色"+this.docI),this.docId&&this.downloadApp()},methods:{handleClick:function(){this.modal=!1},isWeiXinBrowser:function(){var t=window.navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)},download:function(){window.location.href=this.h5APPPath},download2:function(){this.loading=!0,this.src=this.AppStorePath},downloadApp:function(){var t=this;this.$u.get(this.VersionPlatformUrl).then((function(o){0==o.status&&("Android"==o.msg?t.download():"iPhone"==o.msg&&t.download2())}))}}};o.default=i},d1b7:function(t,o,e){"use strict";var i;e.d(o,"b",(function(){return n})),e.d(o,"c",(function(){return s})),e.d(o,"a",(function(){return i}));var n=function(){var t=this,o=t.$createElement;t._self._c},s=[]},e9cc:function(t,o,e){"use strict";(function(t){e("77c6");i(e("66fd"));var o=i(e("ae17"));function i(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},f96d:function(t,o,e){"use strict";e.r(o);var i=e("d1b7"),n=e("6697");for(var s in n)"default"!==s&&function(t){e.d(o,t,(function(){return n[t]}))}(s);e("670e");var a,d=e("f0c5"),c=Object(d["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);o["default"]=c.exports}},[["e9cc","common/runtime","common/vendor"]]]);