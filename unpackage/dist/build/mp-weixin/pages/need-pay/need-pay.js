(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/need-pay/need-pay"],{"201f":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}));var o={tuiBottomPopup:function(){return e.e("ui/tui-bottom-popup/tui-bottom-popup").then(e.bind(null,"54a2"))}},a=function(){var t=this,n=t.$createElement;t._self._c},i=[]},"62f6":function(t,n,e){},6573:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(e("f96d"));function a(t){return t&&t.__esModule?t:{default:t}}var i={components:{myh5:o.default},onLoad:function(){var n=this;this.getPatientDefault(),this.getAddressDefault(),t.$on(this.UPDATEUSER,(function(t){n.patientData=t})),t.$on(this.UPDATEUSERADDRESS,(function(t){n.addressData=t}))},onUnload:function(){t.$off(this.UPDATEUSER),t.$off(this.UPDATEUSERADDRESS)},data:function(){return{isShow:!1,imageUrl:"",patientData:{},addressData:"",payShow:!1,payType:!1}},methods:{toAddress:function(){t.navigateTo({url:"../need-update-address/need-update-address?type=1&addressData="+encodeURIComponent(JSON.stringify(this.addressData))})},upUser:function(){t.navigateTo({url:"../need-update-user/need-update-user?type=1&userData="+encodeURIComponent(JSON.stringify(this.patientData))})},handleHiddenShare:function(){var n=this;this.ifImage();var e=this.payType?1:2;console.log("上传信息"),console.log(this.patientData.id),console.log(this.addressData.id),console.log(e),console.log(this.imageUrl),this.$u.get(this.needSubmitPayUrl,{addressId:this.addressData.id,platForm:e,url:this.imageUrl,deviceType:t.getStorageSync(this.DEVICETYPE)}).then((function(t){console.log(t),n.payPopup(),0==t.status&&(n.payType?n.zfbApi(t.data.body):n.wxPay(t.data))}))},wxPay:function(n){var e=this;t.requestPayment({provider:"wxpay",timeStamp:n.timestamp,nonceStr:n.noncestr,package:n.packagevalue,signType:"MD5",paySign:n.sign,success:function(n){console.log("微信支付成功回调"),t.$emit(e.SUBMITNEED,"提交需求单通知"),t.navigateTo({url:"../need-record/need-record"})},fail:function(t){console.log("微信支付失败回调:"+JSON.stringify(t))}})},wxApi:function(n){var e=this;t.requestPayment({provider:"wxpay",orderInfo:n,success:function(n){t.$emit(e.SUBMITNEED,"提交需求单通知"),t.navigateTo({url:"../need-record/need-record"})},fail:function(t){console.log("微信支付失败回调:"+JSON.stringify(t))}})},zfbApi:function(n){var e=this;t.requestPayment({provider:"alipay",orderInfo:n,success:function(n){t.$emit(e.SUBMITNEED,"提交需求单通知"),t.navigateTo({url:"../need-record/need-record"})},fail:function(t){console.log("支付宝支付失败回调:"+JSON.stringify(t))}})},ifImage:function(){this.$u.test.isEmpty(this.imageUrl)?this.$u.toast("请先上传处方单"):this.payPopup()},checkPay:function(t){t||(this.payType=!this.payType)},payPopup:function(){this.payShow=!this.payShow},getPatientDefault:function(){var t=this;this.$u.get(this.patientDefaultUrl).then((function(n){console.log("默认就诊人"),console.log(n),0==n.status&&(t.patientData=n.data)}))},getAddressDefault:function(){var t=this;this.$u.get(this.addressDefaultUrl).then((function(n){0==n.status&&(t.addressData=n.data)}))},toUpNeed:function(){t.navigateBack()},goRegistration:function(){var n=this;t.chooseImage({count:1,sizeType:["original","compressed"],success:function(e){console.log("回调图片路径"),console.log(JSON.stringify(e.tempFilePaths[0])),console.log(n.utilUploadUrl),t.uploadFile({url:n.utilUploadUrl,method:"POST",filePath:e.tempFilePaths[0],name:"file",success:function(t){console.log(t),200==t.statusCode&&(console.log("上传圖片成功"),n.imageUrl=t.data,n.isShow=!0)},fail:function(t){console.log("上传圖片失败"),console.log(t)}})}})},clean:function(){this.isShow=!1,this.imageUrl=""}}};n.default=i}).call(this,e("543d")["default"])},6697:function(t,n,e){"use strict";e.r(n);var o=e("c000"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=a.a},"670e":function(t,n,e){"use strict";var o=e("84a2"),a=e.n(o);a.a},"84a2":function(t,n,e){},"875a":function(t,n,e){"use strict";e.r(n);var o=e("201f"),a=e("bef3");for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);e("cb7d");var s,u=e("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=r.exports},bef3:function(t,n,e){"use strict";e.r(n);var o=e("6573"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=a.a},c000:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={name:"myh5",props:["docId"],data:function(){return{src:"",modal:!1,loading:!1}},onLoad:function(){console.log("的粉红色"+this.docI),this.docId&&this.downloadApp()},methods:{handleClick:function(){this.modal=!1},isWeiXinBrowser:function(){var t=window.navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)},download:function(){window.location.href=this.h5APPPath},download2:function(){this.loading=!0,this.src=this.AppStorePath},downloadApp:function(){var t=this;this.$u.get(this.VersionPlatformUrl).then((function(n){0==n.status&&("Android"==n.msg?t.download():"iPhone"==n.msg&&t.download2())}))}}};n.default=o},c431:function(t,n,e){"use strict";(function(t){e("77c6");o(e("66fd"));var n=o(e("875a"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},cb7d:function(t,n,e){"use strict";var o=e("62f6"),a=e.n(o);a.a},d1b7:function(t,n,e){"use strict";var o;e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}));var a=function(){var t=this,n=t.$createElement;t._self._c},i=[]},f96d:function(t,n,e){"use strict";e.r(n);var o=e("d1b7"),a=e("6697");for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);e("670e");var s,u=e("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=r.exports}},[["c431","common/runtime","common/vendor"]]]);